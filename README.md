# LB4 Test Demonstrating PostgreSQL 'OR' Condition Bug

'OR conditions' are not parenthesized in the SQL generated by the PostgreSQL connector.

## Example

Using this data:

| tenant | name           | address        |
| ------ | -------------- | -------------- |
| X      | Fred Flinstone | No. 2, Bedrock |
| X      | Barney Rubble  | No.4, Bedrock  |
| Y      | Top Cat        | Trash can      |

I would expect the following filter not to select any data, i.e. it should generate a SQL statement like ` ... WHERE (name='Top Cat' OR address='Trash can') AND tenant='X'`.

```typescript
const data = await repo.find({
  where: {or: [{name: 'Top Cat'}, {address: 'Trash can'}], tenant: 'X'},
});
```

However, it does when using a Postgres datasource `data = ['Y','Top Cat','Trash can']`.
Switching datasource to the the in-memory connector, works as expected.

The problem can be worked around by forcing the whole OR expression to be AND'ed with other conditions:

```typescript
const data = await repo.find({
  where: {
    and: [{or: [{name: 'Top Cat'}, {address: 'Trash can'}]}, {tenant: 'X'}],
  },
});
```

# How to Reproduce Problem

1. Install dependencies: `npm install`

2. Launch a new Postgres DB in docker on PORT 5532 by running: `npm run postgres:build`

3. Run tests with in-memory connector. This should work (all tests pass): `npm run test`

4. Run tests with Postgres connector. This should fail: `npm run test:postgres`
